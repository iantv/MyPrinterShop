{% extends 'base.html.twig' %}

{% block content %}
	<h4>{{ path|raw }}</h4>
		<div id="grid_block">
			<div id="pager"></div>
			<table id="bucket_list"><tr><td></td></tr></table>
			<div id="pager"></div>
			<div class="total_block">
				<label class='total'>ИТОГО:</label>
				<div id="total_sum"></div>
				<span class='total'>рублей</span>
			</div><p>
		{% if is_granted('ROLE_ADMIN') %}
			<!--button class="green_button center_position">Оформить заказ</button-->
		{% elseif is_granted('ROLE_USER') %}
			<button class="green_button center_position" id="create_order">Оформить заказ</button>
		{% else %}
			<button class="green_button center_position">Зарегистироваться</button>
		{% endif %}
		</div>
{% endblock %}

{% block scripts %}
	{% javascripts
		'@AppBundle/Resources/public/js/jqgrid_bucket_create.js' 
		%}
		<script src="{{ asset_url }}"></script>
	{% endjavascripts %}
	<script>
		$('#create_order').click(function (event) {
			$.ajax("{{ path('create_order') }}", {
		        data: { 
		                'order': JSON.stringify(data)
		        },
		        success: function(data) {
		        	alert(data);
		                // change button color
		        },
		        error: function() {
		        	alert('error');
		                // show alert or something
		        }
		    });
		});
	</script>
{% endblock %}

